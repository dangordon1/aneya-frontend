# Aneya Appointment Management System - Implementation Guide

## Status: Ready for Implementation

All code has been generated by parallel agents and is ready to be implemented.

## âœ… Completed Steps

1. **react-calendar installed** - Packages added to package.json
2. **Database schema created** - SQL migration ready (see `supabase_migration.sql`)
3. **TypeScript types created** - `src/types/database.ts` âœ“

## ğŸ“‹ Remaining Implementation Steps

### Step 1: Run Supabase Migration

1. Go to your Supabase project dashboard: https://app.supabase.com/project/ngkmhrckbybqghzfyorp
2. Navigate to SQL Editor
3. Run the SQL from `supabase_migration.sql`
4. Verify tables created: patients, appointments, consultations, symptom_tracker

### Step 2: Create Hook Files

The agent-generated code for hooks is ready. You need to create these files:

#### `/Users/dgordon/aneya/aneya-frontend/src/hooks/usePatients.ts`
- Patient CRUD operations
- Auto-fetch on mount
- Returns: `{ patients, loading, error, createPatient, updatePatient, refetch }`

#### `/Users/dgordon/aneya/aneya-frontend/src/hooks/useAppointments.ts`
- Appointment management with patient join
- Date filtering support
- Returns: `{ appointments, loading, error, createAppointment, updateAppointment, cancelAppointment, refetch }`

#### `/Users/dgordon/aneya/aneya-frontend/src/hooks/useConsultations.ts`
- Consultation saving and fetching
- Patient filtering support
- Returns: `{ consultations, loading, error, saveConsultation, refetch }`

### Step 3: Create Shared UI Components

#### `/Users/dgordon/aneya/aneya-frontend/src/components/TabNavigation.tsx`
- Two-tab system (Appointments | Patients)
- Active tab: navy background, white text
- Inactive tab: cream background, navy text

#### `/Users/dgordon/aneya/aneya-frontend/src/components/AppointmentStatusBadge.tsx`
- Color-coded status badges
- Supports: scheduled, in_progress, completed, cancelled, no_show

#### `/Users/dgordon/aneya/aneya-frontend/src/components/SaveConsultationModal.tsx`
- Consultation save confirmation modal
- Shows patient name, diagnosis, duration
- Warning about unsaved data

### Step 4: Create Patient Management Components

#### `/Users/dgordon/aneya/aneya-frontend/src/components/PatientFormModal.tsx`
- Create/edit patient modal
- Form validation
- All patient fields

#### `/Users/dgordon/aneya/aneya-frontend/src/components/ConsultationHistoryCard.tsx`
- Expandable consultation card
- Shows date, diagnosis, duration
- "View Full Report" button

#### `/Users/dgordon/aneya/aneya-frontend/src/components/PatientDetailView.tsx`
- Full patient details page
- Inline editing for medications/conditions
- Consultation history
- Upcoming appointments (placeholder)

#### `/Users/dgordon/aneya/aneya-frontend/src/components/PatientsTab.tsx`
- Patient list with search
- Table view
- Click to view details
- "Create New Patient" button

### Step 5: Create Appointment Management Components

#### `/Users/dgordon/aneya/aneya-frontend/src/components/AppointmentCard.tsx`
- Individual appointment display
- Time badge, patient name, status
- Action buttons: Start, Modify, Cancel

#### `/Users/dgordon/aneya/aneya-frontend/src/components/AppointmentFormModal.tsx`
- Create/edit appointment modal
- Patient selector, date/time pickers
- Duration and type selectors

#### `/Users/dgordon/aneya/aneya-frontend/src/components/CompactCalendar.tsx`
- Small calendar widget (~300x300px)
- Highlights dates with appointments
- Expand button

#### `/Users/dgordon/aneya/aneya-frontend/src/components/FullCalendarModal.tsx`
- Full-screen calendar view
- Shows appointments on grid
- Click to view/create appointments

#### `/Users/dgordon/aneya/aneya-frontend/src/components/AppointmentsTab.tsx`
- Main appointments view
- Today's appointments list
- Compact calendar integration
- Empty state handling

### Step 6: Modify Existing Components

#### Modify `src/App.tsx`:
- Add tab state management
- Add appointment/patient selection state
- Update Screen type to include 'appointments' and 'patients'
- Change default screen from 'input' to 'appointments'
- Add `handleStartConsultationFromAppointment`
- Add `handleSaveConsultation`
- Update `handleStartNew` to return to appointments
- Add TabNavigation below header
- Add screen rendering for appointments and patients tabs

#### Modify `src/components/InputScreen.tsx`:
- Add `preFilledPatient?: Patient` prop
- Add `appointmentContext?: Appointment` prop
- Pre-fill and lock patient details if provided
- Show appointment context banner

#### Modify `src/components/ReportScreen.tsx`:
- Add `appointmentContext?: Appointment` prop
- Add `onSaveConsultation?: () => void` prop
- Add "Save Consultation" button (if appointmentContext exists)
- Show appointment context banner

### Step 7: Testing

1. **Create test patient**
2. **Create test appointment**
3. **Start consultation from appointment**
4. **Complete analysis and save**
5. **Verify consultation linked to appointment**
6. **Check patient details shows consultation history**

## ğŸ“¦ All Agent-Generated Code Available

All code has been generated by the parallel agents and is documented in their output above. The agents were:

1. **Database & Dependencies** (Agent 97c68a87) âœ…
2. **Types & Hooks** (Agent a7a74e34) âœ…
3. **Shared UI** (Agent b2b87518) âœ…
4. **Patient Components** (Agent c101a743) âœ…
5. **Appointment Components** (Agent c4136b91) âœ…

## ğŸ¨ Design System Reference

**Colors:**
- Primary Navy: `#0c3555` (bg-aneya-navy)
- Accent Teal: `#1d9e99` (bg-aneya-teal)
- Background Cream: `#f6f5ee` (bg-aneya-cream)

**Typography:**
- Page titles: `text-[32px] leading-[38px]`
- Section titles: `text-[20px] leading-[26px]`
- Body text: `text-[15px] leading-[22px]`

**Components:**
- Cards: `bg-white rounded-[16px] aneya-shadow-card border border-aneya-soft-pink p-6`
- Buttons: `bg-aneya-navy hover:bg-aneya-navy-hover text-white px-8 py-3 rounded-[10px]`

## ğŸš€ Next Steps

1. Review agent outputs above for complete code
2. Create remaining files from agent outputs
3. Run Supabase migration
4. Test the implementation
5. Deploy to Vercel

## âš ï¸ Important Notes

- **Database**: Hybrid approach - Supabase for appointments/patients, backend API for consultation analysis
- **Patient Creation**: Manual only (no auto-create)
- **Symptom Tracking**: Future feature (separate patient login)
- **Analysis Flow**: Only accessible through appointments (no standalone)

## ğŸ“ Need Help?

- Check agent outputs above for specific component code
- Refer to `/Users/dgordon/.claude/plans/buzzing-discovering-quasar.md` for detailed plan
- Review `CLAUDE.md` for architecture overview
